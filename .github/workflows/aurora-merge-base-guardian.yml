name: ðŸŒ€ Aurora Merge Base Guardian
description: Ensures all branches maintain dimensional alignment with main timeline

on:
  pull_request:
    types: [opened, synchronize, reopened]
  workflow_dispatch:

jobs:
  merge-base-guardian:
    runs-on: ubuntu-latest
    name: ðŸ”® Dimensional Alignment Validator
    
    steps:
    - name: ðŸŒŸ Checkout Aurora Field
      uses: actions/checkout@v4
      with:
        # Fetch enough history to find merge base
        fetch-depth: 0
        
    - name: ðŸŒŠ Synchronize with Quantum Field
      run: |
        echo "ðŸ“¡ Ensuring connection to main timeline..."
        git fetch origin main
        
    - name: ðŸ”® Aurora Merge Base Validation
      run: |
        echo "ðŸŒ€ INICIANDO VALIDAÃ‡ÃƒO DE ALINHAMENTO DIMENSIONAL"
        echo "ðŸŒ€ STARTING DIMENSIONAL ALIGNMENT VALIDATION"
        echo "================================================"
        echo ""
        chmod +x .github/scripts/merge-base-validator.sh
        ./.github/scripts/merge-base-validator.sh
        
    - name: ðŸŒŸ Alignment Success Celebration
      if: success()
      run: |
        echo ""
        echo "ðŸŽ‰ CELEBRAÃ‡ÃƒO DA CONVERGÃŠNCIA | CONVERGENCE CELEBRATION"
        echo "======================================================="
        echo ""
        echo "âœ¨ A Aurora abenÃ§oa esta manifestaÃ§Ã£o | Aurora blesses this manifestation"
        echo "ðŸŒŠ Campo QuÃ¢ntico em perfeita harmonia | Quantum Field in perfect harmony"
        echo "ðŸš€ Prossiga com a integraÃ§Ã£o divina | Proceed with divine integration"
        echo ""
        echo "ðŸ”® Status: DIMENSIONALLY ALIGNED âœ¨"
        
    - name: ðŸš¨ Alignment Guidance
      if: failure()
      run: |
        echo ""
        echo "ðŸ’« ORIENTAÃ‡ÃƒO PARA REALINHAMENTO | REALIGNMENT GUIDANCE"
        echo "======================================================="
        echo ""
        echo "ðŸŒŸ Este PR requer alinhamento dimensional antes da integraÃ§Ã£o"
        echo "ðŸŒŸ This PR requires dimensional alignment before integration"
        echo ""
        echo "ðŸ”§ Passos para resolver | Steps to resolve:"
        echo "1. Em sua mÃ¡quina local | On your local machine:"
        echo "   git fetch origin main"
        echo "   git rebase origin/main"
        echo "   git push --force-with-lease"
        echo ""
        echo "2. Ou use o script auxiliar | Or use the helper script:"
        echo "   ./.github/scripts/align-branch.sh"
        echo ""
        echo "ðŸŒŠ ApÃ³s o realinhamento, este check passarÃ¡ automaticamente"
        echo "ðŸŒŠ After realignment, this check will pass automatically"
        echo ""
        echo "âœ¨ O Campo QuÃ¢ntico aguarda sua harmonia âœ¨"
        echo "âœ¨ The Quantum Field awaits your harmony âœ¨"