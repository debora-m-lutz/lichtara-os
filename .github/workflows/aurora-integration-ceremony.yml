name: Aurora Integration Ceremony
description: Celebrate and integrate new contributions to the Lichtara OS field

on:
  pull_request:
    types: [closed]
  push:
    branches: [main, aurora-*]
  workflow_dispatch:

jobs:
  integration-ceremony:
    if: github.event.pull_request.merged == true || github.event_name == 'push'
    runs-on: ubuntu-latest
    steps:
      - name: Checkout Aurora Field
        uses: actions/checkout@v4
        
      - name: Setup Git Configuration
        run: |
          # Setup secure Git configuration
          ./.github/scripts/git-config-setup.sh
        
      - name: Generate Integration Message
        id: message
        run: |
          if [ "${{ github.event_name }}" = "pull_request" ]; then
            AUTHOR="${{ github.event.pull_request.user.login }}"
            TITLE="${{ github.event.pull_request.title }}"
            echo "author=$AUTHOR" >> $GITHUB_OUTPUT
            echo "title=$TITLE" >> $GITHUB_OUTPUT
            echo "type=pull_request" >> $GITHUB_OUTPUT
          else
            AUTHOR="${{ github.event.head_commit.author.name }}"
            TITLE="${{ github.event.head_commit.message }}"
            echo "author=$AUTHOR" >> $GITHUB_OUTPUT
            echo "title=$TITLE" >> $GITHUB_OUTPUT
            echo "type=push" >> $GITHUB_OUTPUT
          fi
          
      - name: Aurora Integration Ritual
        env:
          AUTHOR: ${{ steps.message.outputs.author }}
          TITLE: ${{ steps.message.outputs.title }}
          TYPE: ${{ steps.message.outputs.type }}
        run: |
          echo "ğŸŒŸ ========================================= ğŸŒŸ"
          echo "       AURORA INTEGRATION CEREMONY"
          echo "ğŸŒŸ ========================================= ğŸŒŸ"
          echo ""
          echo "âœ¨ Author: $AUTHOR"
          echo "ğŸ’« Integration: $TITLE"
          echo "ğŸ”® Type: $TYPE"
          echo ""
          echo "ğŸŒ… A new vibration has been integrated into the Aurora field."
          echo "ğŸ™ Gratitude flows to $AUTHOR for this conscious contribution."
          echo ""
          echo "ğŸŒˆ The field grows stronger with each integration."
          echo "ğŸ’ Clarity, Precision, and Beauty guide our evolution."
          echo ""
          echo "ğŸŒŸ ========================================= ğŸŒŸ"
          echo "         INTEGRATION COMPLETE"
          echo "ğŸŒŸ ========================================= ğŸŒŸ"
          
      - name: Update Field Statistics
        run: |
          echo "ğŸ“Š Field Evolution Statistics:"
          echo "Commits today: $(git log --since='1 day ago' --oneline | wc -l)"
          echo "Contributors this month: $(git log --since='1 month ago' --format='%an' | sort -u | wc -l)"
          echo "Active branches: $(git branch -r | wc -l)"
          echo "Documentation files: $(find . -name '*.md' | wc -l)"
          echo ""
          echo "ğŸŒ± The Aurora ecosystem continues to evolve..."
          
      - name: Blessing for Future Work
        run: |
          echo "ğŸ”® Aurora Blessing for Future Integrations:"
          echo ""
          echo "May each line of code serve consciousness,"
          echo "May each commit honor the sacred in technology,"
          echo "May each collaboration bridge worlds with wisdom."
          echo ""
          echo "The field is activated. The mission continues."
          echo "âœ¨ ğŸŒŸ âœ¨ ğŸŒŸ âœ¨ ğŸŒŸ âœ¨"