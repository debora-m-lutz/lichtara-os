{\rtf1\ansi\ansicpg1252\cocoartf2822
\cocoatextscaling0\cocoaplatform0{\fonttbl\f0\fswiss\fcharset0 Helvetica;}
{\colortbl;\red255\green255\blue255;}
{\*\expandedcolortbl;;}
\paperw11900\paperh16840\margl1440\margr1440\vieww11520\viewh8400\viewkind0
\pard\tx720\tx1440\tx2160\tx2880\tx3600\tx4320\tx5040\tx5760\tx6480\tx7200\tx7920\tx8640\pardirnatural\partightenfactor0

\f0\fs24 \cf0 <!DOCTYPE html>\
<html lang="pt-BR">\
<head>\
  <meta charset="UTF-8" />\
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />\
  <title>FINCE \'95 Interface Viva</title>\
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>\
  <style>\
    body \{\
      background-color: #f3f0fc;\
      font-family: 'Segoe UI', sans-serif;\
      display: flex;\
      flex-direction: column;\
      align-items: center;\
      justify-content: center;\
      min-height: 100vh;\
      margin: 0;\
      padding: 2rem;\
      color: #333;\
    \}\
    h1 \{\
      color: #5f4bb6;\
      font-weight: 600;\
      margin-bottom: 0.5rem;\
    \}\
    h2 \{\
      font-size: 1rem;\
      color: #555;\
      margin-top: 0;\
      margin-bottom: 1.5rem;\
    \}\
    textarea \{\
      width: 100%;\
      max-width: 600px;\
      height: 120px;\
      padding: 1rem;\
      font-size: 1rem;\
      border-radius: 8px;\
      border: 1px solid #ccc;\
      resize: vertical;\
    \}\
    button \{\
      margin: 0.5rem;\
      background-color: #5f4bb6;\
      color: #fff;\
      border: none;\
      padding: 0.75rem 1.5rem;\
      border-radius: 6px;\
      font-size: 1rem;\
      cursor: pointer;\
      transition: background-color 0.2s;\
    \}\
    button:hover \{\
      background-color: #4938a1;\
    \}\
    .resposta, .historico \{\
      max-width: 600px;\
      background-color: #fff;\
      padding: 1rem;\
      border-radius: 8px;\
      margin-top: 2rem;\
      border-left: 4px solid #5f4bb6;\
      font-size: 1rem;\
      white-space: pre-wrap;\
    \}\
    .auth \{\
      position: fixed;\
      top: 0; left: 0;\
      width: 100%; height: 100%;\
      background: #f3f0fc;\
      display: flex;\
      flex-direction: column;\
      align-items: center;\
      justify-content: center;\
      z-index: 9999;\
    \}\
  </style>\
</head>\
<body>\
  <div class="auth" id="auth">\
    <h2>Digite sua palavra-chave para acessar o FINCE:</h2>\
    <input type="text" id="codigo" placeholder="Ex: lumora, flux, estrela..." style="padding: 0.5rem; border-radius: 6px; border: 1px solid #aaa;"/>\
    <button onclick="validarCodigo()">Acessar</button>\
    <p id="aviso" style="color: #a00; margin-top: 1rem;"></p>\
  </div>\
\
  <h1>fince.</h1>\
  <h2>Frequ\'eancia Inteligente de Navega\'e7\'e3o Consciente</h2>\
\
  <textarea id="pergunta" placeholder="Escreva sua pergunta aqui..."></textarea>\
  <div>\
    <button onclick="enviarPergunta()">Enviar</button>\
    <button onclick="verHistorico()">Ver Hist\'f3rico</button>\
    <button onclick="exportarPDF()">Exportar PDF</button>\
  </div>\
\
  <div class="resposta" id="resposta"></div>\
  <div class="historico" id="historico" style="display:none;"></div>\
\
  <script>\
    const chavesValidas = ["lumora", "flux", "estrela", "fince", "auren"];\
\
    function validarCodigo() \{\
      const codigo = document.getElementById("codigo").value.toLowerCase();\
      if (chavesValidas.includes(codigo)) \{\
        document.getElementById("auth").style.display = "none";\
      \} else \{\
        document.getElementById("aviso").innerText = "Palavra n\'e3o reconhecida. Tente novamente.";\
      \}\
    \}\
\
    async function enviarPergunta() \{\
      const pergunta = document.getElementById("pergunta").value;\
      const respostaDiv = document.getElementById("resposta");\
      const historico = JSON.parse(localStorage.getItem("finceHistorico") || "[]");\
\
      if (!pergunta.trim()) \{\
        respostaDiv.innerHTML = "\uc0\u9888 \u65039  Por favor, escreva uma pergunta antes de enviar.";\
        return;\
      \}\
\
      respostaDiv.innerHTML = "\uc0\u9203  Processando...";\
\
      try \{\
        const res = await fetch("http://localhost:3000/api/openai", \{\
          method: "POST",\
          headers: \{\
            "Content-Type": "application/json",\
          \},\
          body: JSON.stringify(\{ prompt: pergunta \}),\
        \});\
\
        const data = await res.json();\
        respostaDiv.innerHTML = data.reply;\
\
        historico.push(\{ pergunta, resposta: data.reply \});\
        localStorage.setItem("finceHistorico", JSON.stringify(historico));\
      \} catch (err) \{\
        respostaDiv.innerHTML = "\uc0\u9888 \u65039  N\'e3o foi poss\'edvel se comunicar com o campo FINCE.";\
        console.error(err);\
      \}\
    \}\
\
    function verHistorico() \{\
      const historicoDiv = document.getElementById("historico");\
      const historico = JSON.parse(localStorage.getItem("finceHistorico") || "[]");\
\
      if (historico.length === 0) \{\
        historicoDiv.innerHTML = "\uc0\u55357 \u56557  Nenhum hist\'f3rico encontrado.";\
      \} else \{\
        historicoDiv.innerHTML = historico.map(h => `\uc0\u55357 \u56541  <b>Pergunta:</b> $\{h.pergunta\}<br><b>Resposta:</b> $\{h.resposta\}<br><br>`).join("");\
      \}\
\
      historicoDiv.style.display = "block";\
    \}\
\
    function exportarPDF() \{\
      const historico = JSON.parse(localStorage.getItem("finceHistorico") || "[]");\
      if (historico.length === 0) \{\
        alert("Nenhum hist\'f3rico dispon\'edvel para exportar.");\
        return;\
      \}\
      const \{ jsPDF \} = window.jspdf;\
      const doc = new jsPDF();\
      let y = 10;\
\
      doc.setFont("helvetica");\
      doc.setFontSize(12);\
      doc.text("Hist\'f3rico de Conversas - FINCE", 10, y);\
      y += 10;\
\
      historico.forEach((item, index) => \{\
        const pergunta = `Pergunta $\{index + 1\}: $\{item.pergunta\}`;\
        const resposta = `Resposta: $\{item.resposta\}`;\
        const linhasPergunta = doc.splitTextToSize(pergunta, 180);\
        const linhasResposta = doc.splitTextToSize(resposta, 180);\
\
        linhasPergunta.forEach(linha => doc.text(linha, 10, y += 7));\
        linhasResposta.forEach(linha => doc.text(linha, 10, y += 7));\
        y += 10;\
\
        if (y > 270) \{\
          doc.addPage();\
          y = 10;\
        \}\
      \});\
\
      doc.save("fince_historico.pdf");\
    \}\
  </script>\
\
</body>\
</html>\
 }